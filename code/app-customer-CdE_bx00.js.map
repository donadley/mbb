{"version":3,"file":"app-customer-CdE_bx00.js","sources":["../../src/pages/app-customer/app-customer.ts"],"sourcesContent":["// src/components/CustomerList.ts\nimport { LitElement, html, css } from 'lit';\nimport { customElement, state } from 'lit/decorators.js';\nimport { getAllCustomers, Customer } from '../../db/db';\n\n@customElement('app-customer')\nexport class CustomerList extends LitElement {\n  @state() private customers: Customer[] = [];\n\n  static styles = css`\n    .customer-list {\n      max-width: 600px;\n      margin: 0 auto;\n      padding: 1em;\n      background-color: #f9f9f9;\n      border-radius: 8px;\n      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n    }\n    .customer-item {\n      padding: 0.5em;\n      border-bottom: 1px solid #ddd;\n      color: black;\n    }\n    .customer-item:last-child {\n      border-bottom: none;\n    }\n    h2 {\n      text-align: center;\n      color: #333;\n    }\n    button {\n      display: block;\n      margin: 1em auto;\n      padding: 0.5em 1em;\n      background-color: #007bff;\n      color: white;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n    }\n    button:hover {\n      background-color: #0056b3;\n    }\n  `;\n\n  // Fetch customers from IndexedDB when component is first updated\n  async firstUpdated() {\n    this.customers = await getAllCustomers();\n  }\n\n  // Method to download CSV file\n  private downloadCSV() {\n    if (!this.customers.length) {\n      alert('No customer data available to download.');\n      return;\n    }\n\n    const headers = ['First Name', 'Email', 'Date'];\n    const rows = this.customers.map((customer) => [\n      customer.firstName,\n      customer.email,\n      customer.date,\n    ]);\n\n    // Convert to CSV string\n    const csvContent =\n      [headers.join(','), ...rows.map((row) => row.join(','))].join('\\n');\n\n    // Create a Blob and a link to download it\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.href = url;\n    link.download = 'customers.csv';\n    link.click();\n    URL.revokeObjectURL(url); // Cleanup the URL object\n  }\n\n  render() {\n    return html`\n      <app-header ?enableBack=\"${true}\"></app-header>\n      <div class=\"customer-list\">\n        <h2>All Customers</h2>\n        ${this.customers.length > 0\n          ? html`\n              ${this.customers.map(\n                (customer) => html`\n                  <div class=\"customer-item\">\n                    <p><strong>First Name:</strong> ${customer.firstName}</p>\n                    <p><strong>Email:</strong> ${customer.email}</p>\n                    <p><strong>Date:</strong> ${customer.date}</p>\n                  </div>\n                `\n              )}\n            `\n          : html`<p>No customers found.</p>`}\n        <button @click=\"${this.downloadCSV}\">Download CSV</button>\n      </div>\n    `;\n  }\n}\n"],"names":["CustomerList","LitElement","getAllCustomers","headers","rows","customer","csvContent","row","blob","link","url","html","css","__decorateClass","state","customElement"],"mappings":"ySAMa,IAAAA,EAAN,cAA2BC,CAAW,CAAtC,aAAA,CAAA,MAAA,GAAA,SAAA,EACI,KAAQ,UAAwB,CAAC,CAAA,CAuC1C,MAAM,cAAe,CACd,KAAA,UAAY,MAAMC,EAAgB,CAAA,CAIjC,aAAc,CAChB,GAAA,CAAC,KAAK,UAAU,OAAQ,CAC1B,MAAM,yCAAyC,EAC/C,MAAA,CAGF,MAAMC,EAAU,CAAC,aAAc,QAAS,MAAM,EACxCC,EAAO,KAAK,UAAU,IAAKC,GAAa,CAC5CA,EAAS,UACTA,EAAS,MACTA,EAAS,IAAA,CACV,EAGKC,EACJ,CAACH,EAAQ,KAAK,GAAG,EAAG,GAAGC,EAAK,IAAKG,GAAQA,EAAI,KAAK,GAAG,CAAC,CAAC,EAAE,KAAK;AAAA,CAAI,EAG9DC,EAAO,IAAI,KAAK,CAACF,CAAU,EAAG,CAAE,KAAM,0BAA2B,EACjEG,EAAO,SAAS,cAAc,GAAG,EACjCC,EAAM,IAAI,gBAAgBF,CAAI,EACpCC,EAAK,KAAOC,EACZD,EAAK,SAAW,gBAChBA,EAAK,MAAM,EACX,IAAI,gBAAgBC,CAAG,CAAA,CAGzB,QAAS,CACA,OAAAC;AAAAA,iCACsB,EAAI;AAAA;AAAA;AAAA,UAG3B,KAAK,UAAU,OAAS,EACtBA;AAAAA,gBACI,KAAK,UAAU,IACdN,GAAaM;AAAAA;AAAAA,sDAEwBN,EAAS,SAAS;AAAA,iDACvBA,EAAS,KAAK;AAAA,gDACfA,EAAS,IAAI;AAAA;AAAA,iBAG9C,CAAA;AAAA,cAEHM,6BAAgC;AAAA,0BAClB,KAAK,WAAW;AAAA;AAAA,KAAA,CAI1C,EA9FaX,EAGJ,OAASY;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,IAFCC,EAAA,CAAhBC,EAAM,CAAA,EADId,EACM,UAAA,YAAA,CAAA,EADNA,EAANa,EAAA,CADNE,EAAc,cAAc,CAAA,EAChBf,CAAA"}